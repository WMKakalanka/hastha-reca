<!DOCTYPE html>
<html lang="si">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="monetag" content="f3cb40820e452d0b43b911979e8864fd">
    <title>Royal Palmistry | ‡∂∏‡∑Ñ‡∑è ‡∂ª‡∑è‡∂¢ ‡∂∫‡∑ù‡∂ú</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Abhaya+Libre:wght@400;600;800&family=Cinzel:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f0c29;
            --bg-light: #302b63;
            --gold: #FFD700;
            --gold-dim: #b89600;
            --text: #ffffff;
            --card: rgba(20, 20, 40, 0.85);
            --accent: #ff0055;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: linear-gradient(135deg, var(--bg-dark), var(--bg-light), #000);
            color: var(--text);
            font-family: 'Abhaya Libre', serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        /* Container */
        .app-frame {
            width: 100%;
            max-width: 480px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 20px;
            padding: 1.5rem;
            background: rgba(15, 12, 41, 0.95);
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
            text-align: center;
            overflow: hidden;
            position: relative;
        }

        h1 {
            font-family: 'Cinzel', serif;
            color: var(--gold);
            font-size: 1.6rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            margin-bottom: 5px;
            line-height: 1.2;
        }

        /* Scanner Box */
        .scanner-box {
            position: relative;
            height: 320px;
            border: 2px dashed var(--gold-dim);
            border-radius: 15px;
            margin-top: 20px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }

        .scanner-box:active {
            transform: scale(0.98);
            border-color: #fff;
        }

        #previewImg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
            z-index: 1;
            filter: contrast(1.1) brightness(1.1);
        }

        .upload-text {
            z-index: 2;
            pointer-events: none;
            color: #ccc;
        }

        .icon {
            font-size: 3.5rem;
            display: block;
            margin-bottom: 10px;
            color: var(--gold);
            text-shadow: 0 0 15px var(--gold);
        }

        /* Share Progress Bar Styles */
        .share-progress-container {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-top: 15px;
            margin-bottom: 5px;
            overflow: hidden;
            display: none;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .share-progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #FFD700, #ffaa00);
            box-shadow: 0 0 10px #FFD700;
            transition: width 0.4s ease-out;
        }

        /* Analyze Button */
        .btn-gold {
            background: linear-gradient(90deg, #FFD700, #E0AA3E);
            color: #000;
            border: none;
            padding: 16px;
            width: 100%;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 800;
            font-family: 'Cinzel', serif;
            margin-top: 10px;
            cursor: pointer;
            opacity: 0.5;
            pointer-events: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-gold.active {
            opacity: 1;
            pointer-events: auto;
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.4);
        }

        /* Loader (Results) */
        .loader-container {
            width: 100%;
            height: 6px;
            background: #333;
            margin-top: 20px;
            border-radius: 3px;
            display: none;
            overflow: hidden;
        }

        .loader-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--gold), #fff);
            transition: width 2s ease-in-out;
        }

        /* Results Section */
        .results-area {
            display: none;
            margin-top: 30px;
            text-align: left;
            padding-bottom: 40px;
        }

        .card {
            background: var(--card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--gold);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            animation: fadeInUp 0.6s ease;
            position: relative;
        }

        .card.special {
            border-left-color: var(--accent);
            background: rgba(40, 10, 20, 0.8);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-header {
            color: var(--gold);
            font-weight: bold;
            font-size: 0.95rem;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            justify-content: space-between;
        }

        .card-body {
            color: #eee;
            font-size: 1rem;
            line-height: 1.6;
        }

        .timeline-mark {
            color: var(--accent);
            font-weight: bold;
        }

        canvas {
            display: none;
        }
    </style>
</head>

<body>

    <div class="app-frame">
        <header>
            <h1>‡∂ª‡∑è‡∂¢‡∂ö‡∑ì‡∂∫ ‡∑Ñ‡∑É‡∑ä‡∂≠ ‡∂ª‡∑ö‡∂õ‡∑è</h1>
            <p style="color:#aaa; font-size:0.8rem;">Indian Vedic Palmistry Engine</p>
        </header>

        <label class="scanner-box">
            <img id="previewImg">
            <div class="upload-text" id="placeholder">
                <span class="icon">üïâÔ∏è</span>
                <p>Click to Upload Hand</p>
                <p style="font-size:0.7rem; opacity:0.7;">(‡∑Ä‡∂∏‡∑ä ‡∑Ñ‡∑ù ‡∂Ø‡∂ö‡∑î‡∂´‡∑î ‡∂Ö‡∂≠‡∑ö ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫‡∂ö‡∑ä)</p>
            </div>
            <input type="file" id="fileInput" accept="image/*" style="display:none;" onchange="processFile(this)">
        </label>

        <div id="status" style="margin-top:10px; font-size:0.8rem; color:#aaa;">System Ready</div>

        <div class="share-progress-container" id="shareProgressBox">
            <div class="share-progress-fill" id="shareProgressBar"></div>
        </div>

        <div class="loader-container" id="loader">
            <div class="loader-bar" id="loaderBar"></div>
        </div>

        <button class="btn-gold" id="analyzeBtn" onclick="handleShareLogic()">
            ‡∂Ö‡∂±‡∑è‡∂ú‡∂≠‡∂∫ ‡∂∂‡∂Ω‡∂±‡∑ä‡∂± (Analyze)
        </button>

        <div class="results-area" id="results"></div>
    </div>

    <canvas id="canvas"></canvas>

    <script>
        // ===============================================
        // üîÆ MAHA-RAJA ENGINE
        // ===============================================

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const status = document.getElementById('status');

        // Share Logic Variables
        let shareCount = 0;
        const requiredShares = 3;

        let karma = { shape: 0, heart: 0, head: 0, fate: 0, special: 0, wrist: 0 };

        const DB = {
            Shapes: [
                { t: "Earth Hand (‡∂¥‡∑ò‡∂Æ‡∑í‡∑Ä‡∑í)", d: "‡∂†‡∂≠‡∑î‡∂ª‡∑É‡∑ä‚Äç‡∂ª‡∑è‡∂ö‡∑è‡∂ª ‡∂Ö‡∂Ω‡∑ä‡∂Ω‡∂ö‡∑ä ‡∑É‡∑Ñ ‡∂ö‡∑ô‡∂ß‡∑í ‡∂á‡∂ü‡∑í‡∂Ω‡∑í. ‡∂î‡∂∂ ‡∂â‡∂≠‡∑è ‡∂¥‡∑ä‚Äç‡∂ª‡∑è‡∂∫‡∑ù‡∂ú‡∑í‡∂ö, ‡∑Ä‡∂ú‡∂ö‡∑í‡∑Ä‡∂∫‡∑î‡∂≠‡∑î ‡∑É‡∑Ñ ‡∑Ä‡∑ô‡∑Ñ‡∑ô‡∑É ‡∂∏‡∑Ñ‡∂±‡∑ä‡∑É‡∑í ‡∑Ä‡∑ì ‡∑Ä‡∑ê‡∂© ‡∂ö‡∂ª‡∂± ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑í." },
                { t: "Air Hand (‡∑Ä‡∑è‡∂∫‡∑î)", d: "‡∂Ø‡∑í‡∂ú‡∑î ‡∂á‡∂ü‡∑í‡∂Ω‡∑í ‡∑É‡∑Ñ ‡∂†‡∂≠‡∑î‡∂ª‡∑É‡∑ä‚Äç‡∂ª‡∑è‡∂ö‡∑è‡∂ª ‡∂Ö‡∂Ω‡∑ä‡∂Ω‡∂ö‡∑ä. ‡∂î‡∂∂ ‡∑É‡∂∏‡∑è‡∂¢‡∑Å‡∑ì‡∂Ω‡∑ì, ‡∂∂‡∑î‡∂Ø‡∑ä‡∂∞‡∑í‡∂∏‡∂≠‡∑ä ‡∑É‡∑Ñ ‡∂±‡∑Ä ‡∂Ö‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∑Ä‡∂Ω‡∑í‡∂±‡∑ä ‡∂¥‡∑í‡∂ª‡∑î‡∂´‡∑î ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑í." },
                { t: "Fire Hand (‡∂Ö‡∂ú‡∑ä‡∂±‡∑í)", d: "‡∂Ø‡∑í‡∂ú‡∑î ‡∂Ö‡∂Ω‡∑ä‡∂Ω‡∂ö‡∑ä ‡∑É‡∑Ñ ‡∂ö‡∑ô‡∂ß‡∑í ‡∂á‡∂ü‡∑í‡∂Ω‡∑í. ‡∂î‡∂∂ ‡∂±‡∑è‡∂∫‡∂ö‡∂≠‡∑ä‡∑Ä ‡∂ú‡∑î‡∂´ ‡∂á‡∂≠‡∑í, ‡∂â‡∂≠‡∑è ‡∂ã‡∂Ø‡∑ä‡∂∫‡∑ù‡∂ú‡∑í‡∂∏‡∂≠‡∑ä ‡∑É‡∑Ñ ‡∂∞‡∑õ‡∂ª‡∑ä‡∂∫‡∑Ä‡∂±‡∑ä‡∂≠ ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑í." },
                { t: "Water Hand (‡∂¢‡∂Ω)", d: "‡∂Ø‡∑í‡∂ú‡∑î ‡∂Ö‡∂Ω‡∑ä‡∂Ω‡∂ö‡∑ä ‡∑É‡∑Ñ ‡∂Ø‡∑í‡∂ú‡∑î ‡∂á‡∂ü‡∑í‡∂Ω‡∑í. ‡∂î‡∂∂ ‡∂±‡∑í‡∂ª‡∑ä‡∂∏‡∑è‡∂´‡∑Å‡∑ì‡∂Ω‡∑ì, ‡∑É‡∂Ç‡∑Ä‡∑ö‡∂Ø‡∑ì ‡∑É‡∑Ñ ‡∂ö‡∂Ω‡∑è‡∂≠‡∑ä‡∂∏‡∂ö ‡∂∏‡∂±‡∑É‡∂ö‡∑ä ‡∂á‡∂≠‡∑í ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑í." }
            ],
            SpecialMarks: [
                { t: "Fish Sign (‡∂∏‡∂≠‡∑ä‡∑É‡∑ä‚Äç‡∂∫ ‡∂Ω‡∑è‡∂Ç‡∂°‡∂±‡∂∫)", d: "‡∂Ö‡∂≠‡∑ö ‡∂Ö‡∂ú '‡∂∏‡∑è‡∑Ö‡∑î‡∑Ä‡∑ô‡∂ö‡∑î‡∂ú‡∑ö' ‡∑É‡∂Ω‡∂ö‡∑î‡∂´‡∂ö‡∑ä ‡∂Ø‡∑í‡∑É‡∑ä‡∑Ä‡∑ö. ‡∂∏‡∑ô‡∂∫ ‡∂∏‡∑Ñ‡∑è ‡∂∞‡∂± ‡∂∫‡∑ù‡∂ú‡∂∫‡∂ö‡∑í. ‡∂∏‡∑ê‡∂Ø‡∑í ‡∑Ä‡∂∫‡∑É‡∑ö‡∂Ø‡∑ì ‡∑Ä‡∑í‡∑Å‡∑è‡∂Ω ‡∂∞‡∂±‡∂∫‡∂ö‡∑ä ‡∑É‡∑Ñ ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∂≠‡∑ä‡∑Ä‡∂∫‡∂ö‡∑ä ‡∂Ω‡∑ê‡∂∂‡∑ö." },
                { t: "Lotus Sign (‡∂¥‡∂Ø‡∑ä‡∂∏ ‡∂Ω‡∑è‡∂Ç‡∂°‡∂±‡∂∫)", d: "‡∂±‡∑ô‡∑Ö‡∑î‡∂∏‡∑ä ‡∂∏‡∂Ω‡∂ö ‡∑Ñ‡∑ê‡∂©‡∂∫ ‡∂Ø‡∑í‡∑É‡∑ä‡∑Ä‡∑ö. ‡∂∏‡∑ô‡∂∫ ‡∂ª‡∑è‡∂¢ ‡∂∫‡∑ù‡∂ú‡∂∫‡∂ö‡∑í. ‡∂î‡∂∂ ‡∑É‡∂∏‡∑è‡∂¢‡∂∫‡∑ö ‡∂â‡∂≠‡∑è ‡∂â‡∑Ñ‡∑Ö ‡∂¥‡∑í‡∑Ö‡∑í‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∂ö‡∑ä ‡∑É‡∑Ñ ‡∂ú‡∑û‡∂ª‡∑Ä‡∂∫‡∂ö‡∑ä ‡∂Ω‡∂∂‡∂∫‡∑í." },
                { t: "Conch Sign (‡∑Å‡∂Ç‡∂õ ‡∂Ω‡∑è‡∂Ç‡∂°‡∂±‡∂∫)", d: "‡∑Ñ‡∂ö‡∑ä‡∂ú‡∑ô‡∂©‡∑í‡∂∫‡∂ö ‡∑É‡∂Ω‡∂ö‡∑î‡∂´‡∂ö‡∑ä ‡∂á‡∂≠. ‡∂î‡∂∂ ‡∂â‡∂≠‡∑è ‡∂ã‡∂ú‡∂≠‡∑ä, ‡∂∂‡∑î‡∂Ø‡∑ä‡∂∞‡∑í‡∂∏‡∂≠‡∑ä ‡∑É‡∑Ñ ‡∂¥‡∑ä‚Äç‡∂ª‡∂•‡∑è‡∑Ä‡∂±‡∑ä‡∂≠ ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑í." },
                { t: "Trident (‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∑Å‡∑ñ‡∂Ω‡∂∫)", d: "‡∂Ø‡∑õ‡∑Ä ‡∂ª‡∑ö‡∂õ‡∑è‡∑Ä ‡∂Ö‡∂ú ‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∑Å‡∑ñ‡∂Ω‡∂∫‡∂ö‡∑ä ‡∂∏‡∑ô‡∂±‡∑ä ‡∂∂‡∑ô‡∂Ø‡∑ì ‡∂á‡∂≠. ‡∂∏‡∑ô‡∂∫ ‡∂∂‡∂Ω‡∂∫ ‡∑É‡∑Ñ ‡∂ö‡∑ì‡∂ª‡∑ä‡∂≠‡∑í‡∂∫ ‡∂ú‡∑ô‡∂± ‡∂Ø‡∑ô‡∂± ‡∂∏‡∑Ñ‡∑è ‡∑Ä‡∑è‡∑É‡∂±‡∑è‡∑Ä‡∂ö‡∑í." }
            ],
            Heart: [
                "‡∑Ñ‡∑ò‡∂Ø ‡∂ª‡∑ö‡∂õ‡∑è‡∑Ä ‡∂Ø‡∂∂‡∂ª ‡∂á‡∂ü‡∑í‡∂Ω‡∑ä‡∂Ω ‡∂∫‡∂ß‡∑í‡∂±‡∑ä ‡∂¥‡∂ß‡∂±‡∑ä ‡∂ú‡∂±‡∑ì: ‡∂î‡∂∂ ‡∂Ü‡∂Ø‡∂ª‡∂∫‡∑ö‡∂Ø‡∑ì ‡∂â‡∂≠‡∑è ‡∂Ö‡∑Ä‡∂Ç‡∂ö ‡∑É‡∑Ñ ‡∂≠‡∑ò‡∂¥‡∑ä‡∂≠‡∑í‡∂∏‡∂≠‡∑ä ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑í.",
                "‡∑Ñ‡∑ò‡∂Ø ‡∂ª‡∑ö‡∂õ‡∑è‡∑Ä ‡∂∏‡∑ê‡∂Ø ‡∂á‡∂ü‡∑í‡∂Ω‡∑ä‡∂Ω ‡∂∫‡∂ß‡∑í‡∂±‡∑ä ‡∂¥‡∂ß‡∂±‡∑ä ‡∂ú‡∂±‡∑ì: ‡∂Ü‡∂Ø‡∂ª‡∂∫‡∑ö‡∂Ø‡∑ì ‡∂≠‡∂ª‡∂∏‡∂ö‡∑ä ‡∂Ü‡∂≠‡∑ä‡∂∏‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∑è‡∂∏‡∑ì ‡∑Ä‡∑í‡∂∫ ‡∑Ñ‡∑ê‡∂ö.",
                "‡∑Ñ‡∑ò‡∂Ø ‡∂ª‡∑ö‡∂õ‡∑è‡∑Ä ‡∂á‡∂ü‡∑í‡∂Ω‡∑í ‡∂Ø‡∑ô‡∂ö‡∂ö‡∑ä ‡∂Ö‡∂≠‡∂ª‡∑í‡∂±‡∑ä ‡∂¥‡∂ß‡∂±‡∑ä ‡∂ú‡∂±‡∑ì: ‡∂î‡∂∂ ‡∂Ö‡∂±‡∑î‡∂±‡∑ä ‡∂ú‡∑ê‡∂± ‡∑É‡∑í‡∂≠‡∂±, ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∑Ä‡∂±‡∑ä‡∂≠ ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑í.",
                "‡∑Ñ‡∑ò‡∂Ø ‡∂ª‡∑ö‡∂õ‡∑è‡∑Ä ‡∂Ø‡∑í‡∂ú‡∑î ‡∑É‡∑Ñ ‡∑Ä‡∂ö‡∑ä‚Äç‡∂ª ‡∑Ä‡∑ì ‡∂á‡∂≠: ‡∂î‡∂∂ ‡∑Ñ‡∑ê‡∂ü‡∑ì‡∂∏‡∑ä ‡∂¥‡∑ä‚Äç‡∂ª‡∂ö‡∑è‡∑Å ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂∂‡∑í‡∂∫ ‡∂±‡∑ê‡∂≠‡∑í ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑í."
            ],
            Fate: [
                { age: "28", pred: "‡∂ª‡∑ê‡∂ö‡∑í‡∂∫‡∑è‡∑Ä‡∑ö ‡∑É‡∑ä‡∂Æ‡∑è‡∑Ä‡∂ª‡∂≠‡∑ä‡∑Ä‡∂∫‡∂ö‡∑ä ‡∂Ω‡∑ê‡∂∂‡∑ö. ‡∂î‡∂∂‡∑ö ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ‡∂∫‡∑ô‡∂±‡∑ä ‡∂Ø‡∑í‡∂∫‡∑î‡∂´‡∑î ‡∑Ä‡∑ö (Self-made)." },
                { age: "32", pred: "‡∑Ä‡∑í‡∑Ä‡∑è‡∑Ñ‡∂∫ ‡∑Ñ‡∑ù ‡∂¥‡∑Ä‡∑î‡∂Ω‡∑ö ‡∂Ø‡∑í‡∂∫‡∑î‡∂´‡∑î‡∑Ä‡∂ö‡∑ä. ‡∑Ñ‡∂Ø‡∑í‡∑É‡∑í ‡∂∞‡∂± ‡∂Ω‡∑è‡∂∑‡∂∫‡∂ö‡∑ä ‡∂Ω‡∑ê‡∂∂‡∑ì‡∂∏‡∂ß ‡∂â‡∂© ‡∂á‡∂≠." },
                { age: "35", pred: "‡∂â‡∂©‡∂∏‡∑ä ‡∑Ñ‡∑ù ‡∂±‡∑í‡∑Ä‡∑è‡∑É ‡∑Ñ‡∑í‡∂∏‡∑í‡∂ö‡∑è‡∂ª‡∑ì‡∂≠‡∑ä‡∑Ä‡∂∫ ‡∂Ω‡∑ê‡∂∂‡∑ö. ‡∑É‡∂∏‡∑è‡∂¢‡∂∫‡∑ö ‡∂ú‡∑û‡∂ª‡∑Ä‡∂∫ ‡∑Ä‡∑ê‡∂©‡∑í ‡∑Ä‡∑ö." },
                { age: "45", pred: "‡∑É‡∂±‡∑ä‡∑É‡∑î‡∂±‡∑ä ‡∑É‡∑Ñ ‡∑É‡∑ê‡∂¥‡∑Ä‡∂≠‡∑ä ‡∂¢‡∑ì‡∑Ä‡∑í‡∂≠‡∂∫‡∂ö‡∑ä. ‡∂Ø‡∂ª‡∑î‡∑Ä‡∂±‡∑ä‡∂ú‡∑ö ‡∂Ø‡∑í‡∂∫‡∑î‡∂´‡∑î‡∑Ä ‡∂Ø‡∑ê‡∂ö ‡∑É‡∂≠‡∑î‡∂ß‡∑î ‡∑Ä‡∑í‡∂∫ ‡∑Ñ‡∑ê‡∂ö." }
            ],
            Bracelets: [
                "‡∂∏‡∑ê‡∂´‡∑í‡∂ö‡∑ä ‡∂ö‡∂ß‡∑î‡∑Ä‡∑ö ‡∂ª‡∑ö‡∂õ‡∑è ‡∂¥‡∑ê‡∑Ñ‡∑ê‡∂Ø‡∑í‡∂Ω‡∑í‡∂∫: ‡∂±‡∑í‡∂ª‡∑ù‡∂ú‡∑ì ‡∑É‡∑Ñ ‡∂Ø‡∑í‡∂ú‡∑î ‡∂¢‡∑ì‡∑Ä‡∑í‡∂≠‡∂∫‡∂ö‡∑ä ‡∑Ñ‡∑í‡∂∏‡∑í ‡∑Ä‡∑ö.",
                "‡∂∏‡∑ê‡∂´‡∑í‡∂ö‡∑ä ‡∂ö‡∂ß‡∑î‡∑Ä‡∑ö ‡∂ª‡∑ö‡∂õ‡∑è ‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂≠‡∑ä‡∑Ä‡∂∫‡∂ö‡∑ä ‡∂á‡∂≠: ‡∂∞‡∂±‡∂∫, ‡∑É‡∑û‡∂õ‡∑ä‚Äç‡∂∫‡∂∫ ‡∑É‡∑Ñ ‡∑É‡∂≠‡∑î‡∂ß ‡∂¥‡∑í‡∂ª‡∑í ‡∂¢‡∑ì‡∑Ä‡∑í‡∂≠‡∂∫‡∂ö‡∑ä. (Wealth & Health)",
                "‡∂∏‡∑ê‡∂´‡∑í‡∂ö‡∑ä ‡∂ö‡∂ß‡∑î‡∑Ä‡∑ö ‡∂ª‡∑ö‡∂õ‡∑è ‡∂ö‡∑ê‡∂©‡∑ì ‡∂á‡∂≠: ‡∂≠‡∂ª‡∑î‡∂´ ‡∑Ä‡∑í‡∂∫‡∑ö‡∂Ø‡∑ì ‡∂∂‡∑è‡∂∞‡∂ö ‡∂á‡∂≠‡∑í ‡∑Ä‡∑î‡∑Ä‡∂Ø ‡∂∏‡∑ê‡∂Ø‡∑í ‡∑Ä‡∂∫‡∑É‡∑ö‡∂Ø‡∑ì ‡∂¢‡∂∫ ‡∂ú‡∂±‡∑ì.",
                "‡∂ª‡∑ö‡∂õ‡∑è ‡∑É‡∂≥‡∑î ‡∂∏‡∂´‡∑ä‡∂©‡∂Ω‡∂∫‡∂ß ‡∑Ä‡∑í‡∑Ñ‡∑í‡∂Ø‡∑ö: ‡∑Ä‡∑í‡∂Ø‡∑ô‡∑É‡∑ä ‡∂ú‡∂≠ ‡∑Ä‡∑ì‡∂∏‡∑ö ‡∑Ä‡∑è‡∑É‡∂±‡∑è‡∑Ä ‡∂á‡∂≠ (Foreign Travel)."
            ]
        };

        function processFile(input) {
            if (input.files && input.files[0]) {
                const file = input.files[0];
                status.innerText = "Analyzing Biometrics...";
                status.style.color = "#FFD700";

                const reader = new FileReader();
                reader.onload = function (e) {
                    const img = new Image();
                    img.onload = function () {
                        const preview = document.getElementById('previewImg');
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                        document.getElementById('placeholder').style.display = 'none';
                        calculateKarma(img, file.size);
                    }
                    img.src = e.target.result;
                }
                reader.readAsDataURL(file);
            }
        }

        function calculateKarma(img, seed) {
            try {
                const scale = Math.min(1, 300 / img.width);
                canvas.width = img.width * scale;
                canvas.height = img.height * scale;
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                const data = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
                let brightness = 0;
                let r_total = 0;

                for (let i = 0; i < data.length; i += 40) {
                    r_total += data[i];
                    brightness += (data[i] + data[i + 1] + data[i + 2]) / 3;
                }
                const avg = brightness / (data.length / 40);
                const redAvg = r_total / (data.length / 40);

                karma.shape = Math.floor(avg) % 4;
                karma.heart = Math.floor(redAvg) % 4;
                karma.fate = Math.floor(avg + redAvg) % 4;
                karma.special = Math.floor(avg * 1.5) % 4;
                karma.wrist = Math.floor(redAvg * 2) % 4;

            } catch (e) {
                karma.shape = seed % 4;
                karma.heart = (seed * 2) % 4;
                karma.fate = (seed * 3) % 4;
                karma.special = (seed * 5) % 4;
                karma.wrist = (seed * 7) % 4;
            }

            status.innerText = "Scan Complete.";
            status.style.color = "#4ade80";

            // Activate button & Show Progress Bar container
            analyzeBtn.classList.add("active");
            document.getElementById('shareProgressBox').style.display = 'block';

            // Reset state
            shareCount = 0;
            updateShareUI();
        }

        function handleShareLogic() {
            if (shareCount < requiredShares) {
                // 1. Open WhatsApp
                const siteUrl = window.location.href;
                const shareText = `‡∂∏‡∂ú‡∑ö ‡∂Ö‡∂≠‡∑ö ‡∂ª‡∑ö‡∂õ‡∑è ‡∂∂‡∑ê‡∂Ω‡∑î‡∑Ä‡∑è, ‡∂∏‡∑è‡∂ª‡∂∏ ‡∂á‡∂≠‡∑ä‡∂≠.. ‡∂î‡∂∫‡∂≠‡∑ä ‡∂∂‡∂Ω‡∂±‡∑ä‡∂±! üëá\n${siteUrl}`;
                window.open(`https://wa.me/?text=${encodeURIComponent(shareText)}`, '_blank');

                // 2. Increment & Update UI
                shareCount++;
                updateShareUI();

                // 3. If done, trigger results after delay
                if (shareCount >= requiredShares) {
                    setTimeout(showResults, 1000);
                }
            }
        }

        function updateShareUI() {
            const percentage = (shareCount / requiredShares) * 100;
            const bar = document.getElementById('shareProgressBar');

            // Update Bar Width
            bar.style.width = percentage + "%";

            // Update Button Text
            const remaining = requiredShares - shareCount;
            if (remaining > 0) {
                analyzeBtn.innerText = `WhatsApp Share (${shareCount}/${requiredShares})`;
                status.innerText = `‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω ‡∂∂‡∑ê‡∂Ω‡∑ì‡∂∏‡∂ß ‡∂≠‡∑Ä ${remaining} ‡∑Ä‡∂≠‡∑è‡∑Ä‡∂ö‡∑ä Share ‡∂ö‡∂ª‡∂±‡∑ä‡∂±`;
                status.style.color = "#FFD700";
            } else {
                analyzeBtn.innerText = "Processing...";
                status.innerText = "Share ‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´‡∂∫‡∑í! ‡∂Ö‡∂±‡∑è‡∑Ä‡∑ê‡∂ö‡∑í‡∂∫ ‡∑É‡∂ö‡∑É‡∂∏‡∑í‡∂±‡∑ä...";
                status.style.color = "#4ade80";
            }
        }

        function showResults() {
            // Hide Share Elements
            analyzeBtn.style.display = 'none';
            status.style.display = 'none';
            document.getElementById('shareProgressBox').style.display = 'none';

            // Show Analysis Loader
            document.getElementById('loader').style.display = 'block';
            setTimeout(() => document.getElementById('loaderBar').style.width = "50%", 100);
            setTimeout(() => document.getElementById('loaderBar').style.width = "100%", 1000);

            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                renderCards();
            }, 1500);
        }

        function renderCards() {
            const container = document.getElementById('results');
            container.innerHTML = "";
            container.style.display = 'block';

            const shape = DB.Shapes[karma.shape];
            addCard("üñêÔ∏è ‡∑Ñ‡∑É‡∑ä‡∂≠‡∂∫‡∑ö ‡∑É‡∑ä‡∑Ä‡∂∑‡∑è‡∑Ä‡∂∫ (Nature)", `<strong>${shape.t}</strong><br>${shape.d}`);

            const mark = DB.SpecialMarks[karma.special];
            addCard("‚ú® ‡∑Ä‡∑í‡∑Å‡∑ö‡∑Ç ‡∂Ω‡∑è‡∂Ç‡∂°‡∂±‡∂∫ (Special Sign)", `<strong>${mark.t}</strong><br>${mark.d}`, true);

            addCard("‚ù§Ô∏è ‡∑Ñ‡∑ò‡∂Ø ‡∂ª‡∑ö‡∂õ‡∑è‡∑Ä (Love)", DB.Heart[karma.heart]);

            const future = DB.Fate[karma.fate];
            const timelineHTML = `
                <div style="margin-bottom:8px;">
                    <span class="timeline-mark">‡∑Ä‡∂∫‡∑É ${future.age}:</span> ${future.pred}
                </div>
                <div style="font-size:0.9rem; color:#aaa; font-style:italic;">
                    *‡∂∏‡∑ô‡∂∫ ‡∂Ø‡∑õ‡∑Ä ‡∂ª‡∑ö‡∂õ‡∑è‡∑Ä ‡∑É‡∑Ñ ‡∂¢‡∑ì‡∑Ä‡∂± ‡∂ª‡∑ö‡∂õ‡∑è‡∑Ä ‡∂Ö‡∂±‡∑î‡∑Ä ‡∂ú‡∂´‡∂±‡∂∫ ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø‡∑ì.
                </div>
            `;
            addCard("üîÆ ‡∂Ö‡∂±‡∑è‡∂ú‡∂≠ ‡∂Ö‡∂±‡∑è‡∑Ä‡∑ê‡∂ö‡∑í‡∂∫ (Future)", timelineHTML);

            addCard("üéóÔ∏è ‡∂∏‡∑ê‡∂´‡∑í‡∂ö‡∑ä ‡∂ö‡∂ß‡∑î‡∑Ä‡∑ö ‡∂ª‡∑ö‡∂õ‡∑è (Wealth)", DB.Bracelets[karma.wrist]);

            // ===========================================
            // LINKED BUTTON 1: Check Another Person
            // ===========================================
            const btn = document.createElement('button');
            btn.className = "btn-gold active";
            btn.style.marginTop = "20px";
            btn.style.background = "#222";
            btn.style.color = "#fff";
            btn.innerText = "‡∑Ä‡∑ô‡∂±‡∂≠‡∑ä ‡∂Ö‡∂∫‡∑ô‡∂ö‡∑î‡∂ú‡∑ö ‡∂¥‡∂ª‡∑ì‡∂ö‡∑ä‡∑Ç‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±";
            // Redirect to URL
            btn.onclick = () => window.location.href = "https://omg10.com/4/10589692";
            container.appendChild(btn);

            // ===========================================
            // LINKED BUTTON 2: More Result
            // ===========================================
            const moreResBtn = document.createElement('button');
            moreResBtn.className = "btn-gold active";
            moreResBtn.style.marginTop = "15px";
            moreResBtn.style.background = "linear-gradient(90deg, #ff0055, #800020)";
            moreResBtn.innerText = "‡∂≠‡∑Ä‡∂≠‡∑ä ‡∂Ö‡∂±‡∑è‡∂ú‡∂≠‡∂∫ ‡∂∂‡∂Ω‡∂±‡∑ä‡∂±";
            // Redirect to URL
            moreResBtn.onclick = () => window.location.href = "https://omg10.com/4/10589692";
            container.appendChild(moreResBtn);

            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }

        function addCard(title, html, isSpecial = false) {
            const div = document.createElement('div');
            div.className = isSpecial ? 'card special' : 'card';
            div.innerHTML = `<div class="card-header">${title}</div><div class="card-body">${html}</div>`;
            document.getElementById('results').appendChild(div);
        }

    </script>
</body>

</html>